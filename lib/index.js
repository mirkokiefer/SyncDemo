// Generated by CoffeeScript 1.3.3
(function() {
  var LocalBackend, Marionette, Store, backend, branch, data1, data2, store, _ref;

  window.Backbone = require('backbone');

  window._ = require('underscore');

  window.$ = require('jquery-browserify');

  Marionette = require('Backbone.Marionette/lib/backbone.marionette');

  _ref = require('NodeStore'), Store = _ref.Store, backend = _ref.backend;

  backend = backend.browser();

  LocalBackend = new backend.LocalStorage();

  store = new Store(LocalBackend);

  data1 = {
    "a/b": "test1",
    "a/c": "test2",
    "d": "test3"
  };

  data2 = {
    "a/b": "test1modified",
    "e/f/g": "test4"
  };

  branch = store.branch();

  branch.commit(data1, function(err, head1) {
    return branch.commit(data2, function() {
      var oldBranch;
      oldBranch = store.branch(head1);
      oldBranch.read({
        path: 'a/b'
      }, function(err, res) {
        return console.log("old", res);
      });
      return branch.read({
        path: 'a/b'
      }, function(err, res) {
        return console.log(res);
      });
    });
  });

  console.log("test");

}).call(this);
